<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Due침o - Sistema Franquicias</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="data.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen pb-20">
    <!-- Header Mobile-First -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="px-4 py-3 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <a href="../index.html" class="text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </a>
                <h1 class="text-lg font-bold text-gray-800">Dashboard Due침o</h1>
            </div>
            <div class="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-semibold">
                D
            </div>
        </div>
    </header>

    <!-- Navegaci칩n Mobile -->
    <nav class="bg-white border-t border-gray-200 fixed bottom-0 left-0 right-0 z-50">
        <div class="flex justify-around items-center h-16">
            <button onclick="mostrarSeccion('dashboard', event.target)" class="nav-item flex flex-col items-center space-y-1 text-orange-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                </svg>
                <span class="text-xs font-medium">Dashboard</span>
            </button>
            <button onclick="mostrarSeccion('franquicias', event.target)" class="nav-item flex flex-col items-center space-y-1 text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                </svg>
                <span class="text-xs font-medium">Franquicias</span>
            </button>
            <button onclick="mostrarSeccion('ventas', event.target)" class="nav-item flex flex-col items-center space-y-1 text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
                <span class="text-xs font-medium">Ventas</span>
            </button>
            <button onclick="mostrarSeccion('promociones', event.target)" class="nav-item flex flex-col items-center space-y-1 text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span class="text-xs font-medium">Promos</span>
            </button>
        </div>
    </nav>

    <!-- Contenido Principal -->
    <main class="px-4 py-4">
        <!-- Secci칩n Dashboard -->
        <div id="seccion-dashboard" class="seccion">
            <!-- KPIs Principales -->
            <div class="grid grid-cols-2 gap-3 mb-4">
                <div class="bg-white rounded-xl p-4 shadow-sm">
                    <p class="text-xs text-gray-500 mb-1">Ventas Hoy</p>
                    <p class="text-xl font-bold text-gray-800" id="ventas-hoy">$0</p>
                    <p class="text-xs text-green-600 mt-1 flex items-center">
                        <span class="inline-block">+12.5%</span>
                    </p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm">
                    <p class="text-xs text-gray-500 mb-1">Ventas Semana</p>
                    <p class="text-xl font-bold text-gray-800" id="ventas-semana">$0</p>
                    <p class="text-xs text-blue-600 mt-1">7 d칤as</p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm">
                    <p class="text-xs text-gray-500 mb-1">Pedidos Pendientes</p>
                    <p class="text-xl font-bold text-orange-600" id="pedidos-pendientes">0</p>
                    <p class="text-xs text-gray-500 mt-1">Requieren atenci칩n</p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm">
                    <p class="text-xs text-gray-500 mb-1">Franquicias Activas</p>
                    <p class="text-xl font-bold text-green-600" id="franquicias-activas">0</p>
                    <p class="text-xs text-gray-500 mt-1">En operaci칩n</p>
                </div>
            </div>

            <!-- Gr치fico de Ventas -->
            <div class="bg-white rounded-xl p-4 shadow-sm mb-4">
                <h2 class="text-sm font-semibold text-gray-800 mb-3">Ventas de la Semana</h2>
                <div id="grafico-ventas-semana" class="space-y-2">
                    <!-- Se llenar치 con JavaScript -->
                </div>
            </div>

            <!-- Franquicias Destacadas -->
            <div class="bg-white rounded-xl p-4 shadow-sm mb-4">
                <h2 class="text-sm font-semibold text-gray-800 mb-3">Franquicias Destacadas</h2>
                <div id="franquicias-destacadas" class="space-y-2">
                    <!-- Se llenar치 con JavaScript -->
                </div>
            </div>

            <!-- Productos Top -->
            <div class="bg-white rounded-xl p-4 shadow-sm">
                <h2 class="text-sm font-semibold text-gray-800 mb-3">Productos M치s Vendidos</h2>
                <div id="productos-top" class="space-y-2">
                    <!-- Se llenar치 con JavaScript -->
                </div>
            </div>
        </div>

        <!-- Secci칩n Franquicias -->
        <div id="seccion-franquicias" class="seccion hidden">
            <div class="mb-4">
                <input type="text" placeholder="Buscar franquicia..." 
                       class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent">
            </div>
            <div id="lista-franquicias" class="space-y-3">
                <!-- Se llenar치 con JavaScript -->
            </div>
        </div>

        <!-- Secci칩n Ventas -->
        <div id="seccion-ventas" class="seccion hidden">
            <div class="bg-white rounded-xl p-4 shadow-sm mb-4">
                <h2 class="text-sm font-semibold text-gray-800 mb-3">Resumen de Ventas</h2>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">Hoy</span>
                        <span class="text-lg font-bold text-gray-800" id="resumen-hoy">$0</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">Esta Semana</span>
                        <span class="text-lg font-bold text-gray-800" id="resumen-semana">$0</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">Este Mes</span>
                        <span class="text-lg font-bold text-gray-800" id="resumen-mes">$0</span>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl p-4 shadow-sm">
                <h2 class="text-sm font-semibold text-gray-800 mb-3">Tendencia de Ventas</h2>
                <div id="grafico-tendencia" class="space-y-2">
                    <!-- Se llenar치 con JavaScript -->
                </div>
            </div>
        </div>

        <!-- Secci칩n Promociones -->
        <div id="seccion-promociones" class="seccion hidden">
            <div id="lista-promociones" class="space-y-3">
                <!-- Se llenar치 con JavaScript -->
            </div>
        </div>
    </main>

    <script>
        // Funci칩n para mostrar secci칩n y actualizar navegaci칩n
        function mostrarSeccion(seccion, element) {
            // Ocultar todas las secciones
            document.querySelectorAll('.seccion').forEach(el => el.classList.add('hidden'));
            
            // Mostrar la secci칩n seleccionada
            document.getElementById(`seccion-${seccion}`).classList.remove('hidden');
            
            // Actualizar navegaci칩n
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('text-orange-600');
                el.classList.add('text-gray-400');
            });
            if (element) {
                element.closest('.nav-item').classList.remove('text-gray-400');
                element.closest('.nav-item').classList.add('text-orange-600');
            }
        }

        // Cargar datos del dashboard
        function cargarDashboard() {
            const data = mockData.due침o;
            
            // Actualizar KPIs
            document.getElementById('ventas-hoy').textContent = utils.formatCurrency(data.ventasTotales.hoy);
            document.getElementById('ventas-semana').textContent = utils.formatCurrency(data.ventasTotales.semana);
            document.getElementById('pedidos-pendientes').textContent = data.pedidosTotales.pendientes;
            document.getElementById('franquicias-activas').textContent = data.franquicias.length;

            // Gr치fico de ventas por d칤a (est치tico)
            const ventasPorDia = [
                { dia: 'Lun', ventas: 180000 },
                { dia: 'Mar', ventas: 210000 },
                { dia: 'Mi칠', ventas: 195000 },
                { dia: 'Jue', ventas: 220000 },
                { dia: 'Vie', ventas: 240000 },
                { dia: 'S치b', ventas: 260000 },
                { dia: 'Dom', ventas: 196000 }
            ];
            const maxVenta = Math.max(...ventasPorDia.map(v => v.ventas));
            
            const htmlGraficoVentas = ventasPorDia.map(v => {
                const porcentaje = (v.ventas / maxVenta) * 100;
                return `
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs text-gray-600">${v.dia}</span>
                            <span class="text-xs font-semibold text-gray-800">${utils.formatCurrency(v.ventas)}</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-orange-500 h-2 rounded-full" style="width: ${porcentaje}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('grafico-ventas-semana').innerHTML = htmlGraficoVentas;

            // Franquicias destacadas (top 3 por ventas)
            const destacadas = [...data.franquicias]
                .sort((a, b) => b.ventasHoy - a.ventasHoy)
                .slice(0, 3);
            
            const htmlDestacadas = destacadas.map(f => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex-1">
                        <p class="text-sm font-semibold text-gray-800">${f.nombre}</p>
                        <p class="text-xs text-gray-500">${f.ubicacion}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm font-bold text-gray-800">${utils.formatCurrency(f.ventasHoy)}</p>
                        <p class="text-xs text-green-600">${utils.getTendenciaIcon(f.tendencia)}</p>
                    </div>
                </div>
            `).join('');
            document.getElementById('franquicias-destacadas').innerHTML = htmlDestacadas;

            // Productos top
            const htmlProductos = data.productosTop.map((p, idx) => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center text-orange-600 font-bold text-sm">
                            ${idx + 1}
                        </div>
                        <div>
                            <p class="text-sm font-semibold text-gray-800">${p.nombre}</p>
                            <p class="text-xs text-gray-500">${utils.formatNumber(p.cantidad)} unidades</p>
                        </div>
                    </div>
                    <p class="text-sm font-bold text-gray-800">${utils.formatCurrency(p.ventas)}</p>
                </div>
            `).join('');
            document.getElementById('productos-top').innerHTML = htmlProductos;
        }

        // Cargar lista de franquicias
        function cargarFranquicias() {
            const data = mockData.due침o;
            const html = data.franquicias.map(f => `
                <div class="bg-white rounded-xl p-4 shadow-sm">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <h3 class="text-base font-semibold text-gray-800">${f.nombre}</h3>
                            <p class="text-xs text-gray-500 mt-1">${f.ubicacion}</p>
                        </div>
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${utils.getEstadoColor(f.estado)}">
                            ${f.estado}
                        </span>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mb-3">
                        <div>
                            <p class="text-xs text-gray-500">Ventas Hoy</p>
                            <p class="text-sm font-bold text-gray-800">${utils.formatCurrency(f.ventasHoy)}</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">Ventas Semana</p>
                            <p class="text-sm font-bold text-gray-800">${utils.formatCurrency(f.ventasSemana)}</p>
                        </div>
                    </div>
                    <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                        <div class="flex items-center space-x-4 text-xs text-gray-500">
                            <span>游닍 ${f.pedidosPendientes} pedidos</span>
                            ${f.stockBajo > 0 ? `<span class="text-red-600">丘멆잺 ${f.stockBajo} stock bajo</span>` : ''}
                        </div>
                        ${utils.getTendenciaIcon(f.tendencia)}
                    </div>
                </div>
            `).join('');
            document.getElementById('lista-franquicias').innerHTML = html;
        }

        // Cargar resumen de ventas
        function cargarVentas() {
            const data = mockData.due침o;
            document.getElementById('resumen-hoy').textContent = utils.formatCurrency(data.ventasTotales.hoy);
            document.getElementById('resumen-semana').textContent = utils.formatCurrency(data.ventasTotales.semana);
            document.getElementById('resumen-mes').textContent = utils.formatCurrency(data.ventasTotales.mes);

            // Gr치fico de tendencia (est치tico)
            const ventasPorSemana = [
                { semana: 'Sem 1', ventas: 1100000 },
                { semana: 'Sem 2', ventas: 1150000 },
                { semana: 'Sem 3', ventas: 1200000 },
                { semana: 'Sem 4', ventas: 1220000 }
            ];
            const maxSemana = Math.max(...ventasPorSemana.map(v => v.ventas));
            
            const htmlTendencia = ventasPorSemana.map(v => {
                const porcentaje = (v.ventas / maxSemana) * 100;
                return `
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs text-gray-600">${v.semana}</span>
                            <span class="text-xs font-semibold text-gray-800">${utils.formatCurrency(v.ventas)}</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="bg-orange-500 h-3 rounded-full" style="width: ${porcentaje}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('grafico-tendencia').innerHTML = htmlTendencia;
        }

        // Cargar promociones
        function cargarPromociones() {
            const data = mockData.due침o;
            const html = data.promocionesActivas.map(p => `
                <div class="bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl p-4 shadow-sm border border-orange-100">
                    <div class="flex items-start justify-between mb-2">
                        <h3 class="text-base font-semibold text-gray-800">${p.nombre}</h3>
                        <span class="px-2 py-1 text-xs font-medium rounded-full bg-orange-200 text-orange-800">
                            ${p.efectividad}% efectividad
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">${p.descripcion}</p>
                    <div class="flex items-center justify-between text-xs text-gray-500">
                        <span>游늰 ${p.fechaInicio} - ${p.fechaFin}</span>
                        <span>游늸 ${p.franquicias.join(', ')}</span>
                    </div>
                </div>
            `).join('');
            document.getElementById('lista-promociones').innerHTML = html;
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            cargarDashboard();
            cargarFranquicias();
            cargarVentas();
            cargarPromociones();
        });
    </script>
</body>
</html>

